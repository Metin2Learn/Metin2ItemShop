<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from docs.sura-head.dev/systems/itemshop/installation/binary/client/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Dec 2022 17:48:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.104.1">
    <meta name="generator" content="Relearn 5.2.3+tip">
    <meta name="description" content="">
    <title>Client :: sura_head.exe docs</title>
    <link href="index.xml" rel="alternate" type="application/rss+xml" title="sura_head.exe docs">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="../../../../../css/fontawesome-all.min8069.css?1670088480" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../../css/fontawesome-all.min8069.css?1670088480" rel="stylesheet"></noscript>
    <link href="../../../../../css/featherlight.min8069.css?1670088480" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../../css/featherlight.min8069.css?1670088480" rel="stylesheet"></noscript>
    <link href="../../../../../css/auto-complete8069.css?1670088480" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../../css/auto-complete8069.css?1670088480" rel="stylesheet"></noscript>
    <link href="../../../../../css/perfect-scrollbar.min8069.css?1670088480" rel="stylesheet">
    <link href="../../../../../css/nucleus8069.css?1670088480" rel="stylesheet">
    <link href="../../../../../css/fonts8069.css?1670088480" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../../css/fonts8069.css?1670088480" rel="stylesheet"></noscript>
    <link href="../../../../../css/theme8069.css?1670088480" rel="stylesheet">
    <link href="../../../../../css/theme-blue8069.css?1670088480" rel="stylesheet" id="variant-style">
    <link href="../../../../../css/ie8069.css?1670088480" rel="stylesheet">
    <link href="../../../../../css/variant8069.css?1670088480" rel="stylesheet">
    <link href="../../../../../css/print8069.css?1670088480" rel="stylesheet" media="print">
    <script src="../../../../../js/variant8069.js?1670088480"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="../../../../../index.json";
      var root_url="../../../../../index.html";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='index.html\/\/docs.sura-head.dev/';
      window.variants && variants.init( [ 'blue' ] );
    </script>
    <script src="../../../../../js/jquery.min8069.js?1670088480" defer></script><link id="dark-mode-theme" rel="stylesheet" href="../../../../../css/dark.css">
  </head>
  <body class="mobile-support html" data-url="/systems/itemshop/installation/binary/client/">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div class="navigation">
             <a class="nav nav-next" href="../../../errors/index.html" title="Possible errors and fixes (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a>
          </div>
          <div class="navigation">
             <a class="nav nav-prev" href="../userinterface/index.html" title="UserInterface (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <span id="toc-menu" title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <meta itemprop="itemListOrder" content="Descending" />
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="6" /><a itemprop="item" href="../../../../../index.html"><span itemprop="name">docs.sura-head.dev</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="5" /><a itemprop="item" href="../../../../index.html"><span itemprop="name">Systems</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="4" /><a itemprop="item" href="../../../index.html"><span itemprop="name">Itemshop</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="3" /><a itemprop="item" href="../../index.html"><span itemprop="name">Installation</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="2" /><a itemprop="item" href="../index.html"><span itemprop="name">Binary</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="1" /><a itemprop="item" href="index.html" aria-disabled="true"><span itemprop="name">Client</span></a></li>
            </ol>
          </div>
          <div class="default-animation progress">
            <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-download-etc-images">1. Download ETC images</a></li>
        <li><a href="#2-download-banner--icon-images">2. Download banner &amp; icon images</a></li>
        <li><a href="#3-constinfopy">3. constinfo.py</a></li>
        <li><a href="#4-gamepy">4. game.py</a></li>
        <li><a href="#5-interfacemodulepy">5. interfacemodule.py</a></li>
        <li><a href="#6-uipy">6. ui.py</a></li>
        <li><a href="#7-uiitemshoppy">7. uiitemshop.py</a></li>
      </ul>
    </li>
  </ul>
</nav>
            </div>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="default">
<h1>Client</h1>

<h3 id="1-download-etc-images">1. Download ETC images</h3>
<blockquote>
<p>Download: <strong><a href="https://mega.nz/file/TQ8kybrY#zFgvhfEw8Q-BV8UQL0Yox_wYg95zYy3yk6aj1An0a7g">ETC images</a></strong></p>
</blockquote>
<pre><code>Unpack into Client/pack
</code></pre>
<hr>
<h3 id="2-download-banner--icon-images">2. Download banner &amp; icon images</h3>
<blockquote>
<p>Download: <strong><a href="https://mega.nz/file/bRsEXTaY#sWwzVJQwXH4Czijtpf55ZQ_kFqLp0iP-QgCslQyLSOQ">banner &amp; icon images</a></strong></p>
</blockquote>
<pre><code>Unpack into Client/pack/root/
</code></pre>
<hr>
<h3 id="3-constinfopy">3. constinfo.py</h3>
<p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">ITEMSHOP_INFOS</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">		<span class="n">PROMOTION_CODE_REWARDS</span> <span class="o">=</span> <span class="p">[]</span>
</span></span></code></pre></div><hr>
<h3 id="4-gamepy">4. game.py</h3>
<p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="n">onPressKeyDict</span><span class="p">[</span><span class="n">app</span><span class="o">.</span><span class="n">DIK_LALT</span><span class="p">]</span>		<span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ShowName</span><span class="p">()</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">onPressKeyDict</span><span class="p">[</span><span class="n">app</span><span class="o">.</span><span class="n">DIK_F9</span><span class="p">]</span>	<span class="o">=</span> <span class="k">lambda</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">ToggleItemshop</span><span class="p">()</span>
</span></span></code></pre></div><p>Add to end of file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_UPDATE_ITEMSHOP_ITEMS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span> <span class="o">=</span> <span class="n">obj</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">ReloadItemshop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_UPDATE_ITEMSHOP_ITEM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">ReloadItemshopItem</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_UPDATE_ITEMSHOP_COINS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coins</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">SetCoins</span><span class="p">(</span><span class="n">coins</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_OPEN_ITEMSHOP</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">OpenItemshop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_REMOVE_ITEMSHOP_ITEM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">RemoveItemshopItem</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_ADD_ITEMSHOP_ITEM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">AddItemshopItem</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">BINARY_PROMOTION_CODE_REWARDS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">constInfo</span><span class="o">.</span><span class="n">PROMOTION_CODE_REWARDS</span> <span class="o">=</span> <span class="n">item</span> <span class="k">if</span> <span class="n">item</span> <span class="k">else</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">PROMOTION_CODE_REWARDS</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">StartPromotionAnimation</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</span></span></code></pre></div><hr>
<h3 id="5-interfacemodulepy">5. interfacemodule.py</h3>
<p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="kn">import</span> <span class="nn">uiitemshop</span>
</span></span><span class="line"><span class="cl">		<span class="kn">import</span> <span class="nn">net</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndGuild</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndGuildBuilding</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndAcce</span> <span class="o">=</span> <span class="kc">None</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span> <span class="o">=</span> <span class="kc">None</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">MakeInterface</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span></code></pre></div><p>Add above:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">__MakeItemshop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span> <span class="o">=</span> <span class="n">uiitemshop</span><span class="o">.</span><span class="n">ItemshopWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">__MakeCubeWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">__MakeCubeResultWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">__MakeItemSelectWindow</span><span class="p">()</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">__MakeItemshop</span><span class="p">()</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndDragonSoul</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndDragonSoul</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</span></span></code></pre></div><p>Add above:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemSelect</span>
</span></span><span class="line"><span class="cl">			<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndAcce</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ShowAllWindows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndTaskBar</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndCharacter</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndInventory</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndExpandedMoneyTaskBar</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndDragonSoul</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndDragonSoulRefine</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndChat</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">wndMiniMap</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">HideAllWindows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndTaskBar</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndTaskBar</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndEnergyBar</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndEnergyBar</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndCharacter</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndCharacter</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndInventory</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndInventory</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="n">hideWindows</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">IsShow</span><span class="p">(),</span> <span class="n">hideWindows</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">Hide</span><span class="p">(),</span> <span class="n">hideWindows</span><span class="p">)</span>
</span></span></code></pre></div><p>Add above:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">hideWindows</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">,</span>
</span></span></code></pre></div><p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">EmptyFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">pass</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">ToggleItemshop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">IsShow</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Open</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">OpenItemshop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">IsShow</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">Open</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">ReloadItemshop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">ReloadItemshop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">ReloadItemshopItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">ReloadItemshopItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">ReloadItemshopContainer</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">RemoveItemshopItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">RemoveItemshopItem</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">RemoveItemFromItemshopContainer</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">AddItemshopItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">AddItemshopItem</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">SetCoins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coins</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">SetCoins</span><span class="p">(</span><span class="n">coins</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">StartPromotionAnimation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">answer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">wndItemshop</span><span class="o">.</span><span class="n">StartPromotionAnimation</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</span></span></code></pre></div><hr>
<h3 id="6-uipy">6. ui.py</h3>
<p>Search:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnEndFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">pass</span>
</span></span></code></pre></div><p>Add:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">ENABLE_ITEMSHOP</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">ResetFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">wndMgr</span><span class="o">.</span><span class="n">ResetFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hWnd</span><span class="p">)</span>
</span></span></code></pre></div><hr>
<h3 id="7-uiitemshoppy">7. uiitemshop.py</h3>
<p>Create: uiitemshop.py</p>
<pre><code>Note: Adjust STACK_MAX = 5000 to your max stack size
Note: Enable ENABLE_OTHER_TOOLTIP_FUNCTION if tooltip is not working
</code></pre>
<p>Insert this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">	<span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">	  .oooooo.   oooooo   oooo ooooo      ooo   .oooo.   
</span></span></span><span class="line"><span class="cl"><span class="s2">	 d8P&#39;  `Y8b   `888.   .8&#39;  `888b.     `8&#39; .dP&#34;&#34;Y88b  
</span></span></span><span class="line"><span class="cl"><span class="s2">	888            `888. .8&#39;    8 `88b.    8        ]8P&#39; 
</span></span></span><span class="line"><span class="cl"><span class="s2">	888             `888.8&#39;     8   `88b.  8      &lt;88b.  
</span></span></span><span class="line"><span class="cl"><span class="s2">	888              `888&#39;      8     `88b.8       `88b. 
</span></span></span><span class="line"><span class="cl"><span class="s2">	`88b    ooo       888       8       `888  o.   .88P  
</span></span></span><span class="line"><span class="cl"><span class="s2">	 `Y8bood8P&#39;      o888o     o8o        `8  `8bd88P&#39;
</span></span></span><span class="line"><span class="cl"><span class="s2">	
</span></span></span><span class="line"><span class="cl"><span class="s2">	Version:
</span></span></span><span class="line"><span class="cl"><span class="s2">		Release 1.0.0
</span></span></span><span class="line"><span class="cl"><span class="s2">	
</span></span></span><span class="line"><span class="cl"><span class="s2">	Contacts:
</span></span></span><span class="line"><span class="cl"><span class="s2">		Metin2Downloads: https://www.metin2downloads.to/cms/user/11018-cyn3/
</span></span></span><span class="line"><span class="cl"><span class="s2">		Discord: Franky#6315
</span></span></span><span class="line"><span class="cl"><span class="s2">	
</span></span></span><span class="line"><span class="cl"><span class="s2">	Support:
</span></span></span><span class="line"><span class="cl"><span class="s2">		Discord: https://discord.gg/sura-head
</span></span></span><span class="line"><span class="cl"><span class="s2">	
</span></span></span><span class="line"><span class="cl"><span class="s2">	Special thanks to:
</span></span></span><span class="line"><span class="cl"><span class="s2">		- Rainer				&lt;- Design &amp; Animations
</span></span></span><span class="line"><span class="cl"><span class="s2">		- SamaLamaDingDong		&lt;- Code review ( Server-Source )
</span></span></span><span class="line"><span class="cl"><span class="s2">		- &lt;&gt;					&lt;- Mental support
</span></span></span><span class="line"><span class="cl"><span class="s2">	&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Python imports</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">ui</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">localeInfo</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">uiToolTip</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">constInfo</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">uiCommon</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Binary imports</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">item</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">net</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">snd</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">ime</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">wndMgr</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">app</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">player</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">dbg</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Extern imports</span>
</span></span><span class="line"><span class="cl">	<span class="kn">from</span> <span class="nn">_weakref</span> <span class="kn">import</span> <span class="n">proxy</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">math</span>
</span></span><span class="line"><span class="cl">	<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randrange</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Only set to true if tooltip not visible</span>
</span></span><span class="line"><span class="cl">	<span class="n">ENABLE_OTHER_TOOLTIP_FUNCTION</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Adjust max stack size, i could send it via packet but cmon.</span>
</span></span><span class="line"><span class="cl">	<span class="n">STACK_MAX</span> <span class="o">=</span> <span class="mi">5000</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">PAGE_DEFAULT</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">	<span class="n">PAGE_SHOP</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="n">PAGE_MAX_NUM</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">MAX_ALPHA</span> <span class="o">=</span> <span class="mf">1.0</span>
</span></span><span class="line"><span class="cl">	<span class="n">MIN_ALPHA</span> <span class="o">=</span> <span class="mf">0.3</span>
</span></span><span class="line"><span class="cl">	<span class="n">BANNER_CHANGE_BY</span> <span class="o">=</span> <span class="mf">0.01</span>
</span></span><span class="line"><span class="cl">	<span class="n">PROMOTION_CHANGE_BY</span> <span class="o">=</span> <span class="mf">0.02</span>
</span></span><span class="line"><span class="cl">	<span class="n">IMAGE_CHANGE_TIME</span> <span class="o">=</span> <span class="mf">0.04</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: If category-icon has no &#39;.&#39; we load as item-icon else:</span>
</span></span><span class="line"><span class="cl">	<span class="n">ICON_PATH</span> <span class="o">=</span> <span class="s1">&#39;itemshop/icons/&#39;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">BANNER_CONTAINER</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">		<span class="s1">&#39;itemshop/banners/banner_1.png&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s1">&#39;itemshop/banners/banner_2.png&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="p">]</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: All strings you have to know about</span>
</span></span><span class="line"><span class="cl">	<span class="n">ITEMSHOP_INFO</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s1">&#39;pages&#39;</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">PAGE_DEFAULT</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;text&#39;</span> <span class="p">:</span> <span class="s1">&#39;Itemshop - Startpage&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="n">PAGE_SHOP</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;text&#39;</span> <span class="p">:</span> <span class="s1">&#39;Itemshop - Shop&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="s1">&#39;promotion_code&#39;</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="mi">0</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;text&#39;</span> <span class="p">:</span> <span class="s1">&#39;Promotion-code invalid.&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;color&#39;</span> <span class="p">:</span> <span class="mh">0xffFD0803</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="mi">1</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;text&#39;</span> <span class="p">:</span> <span class="s1">&#39;Promotion code redeemed.&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;color&#39;</span> <span class="p">:</span> <span class="mh">0xff4AD537</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">},</span>
</span></span><span class="line"><span class="cl">			<span class="mi">2</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;text&#39;</span> <span class="p">:</span> <span class="s1">&#39;Promotion code already redeemed.&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;color&#39;</span> <span class="p">:</span> <span class="mh">0xff6576EF</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="s1">&#39;strings&#39;</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="s1">&#39;ITEM_PRICE&#39;</span> <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> Coins&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="s1">&#39;ITEMS_LEFT&#39;</span> <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> left&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="s1">&#39;BUY_QUESTION&#39;</span> <span class="p">:</span> <span class="s1">&#39;Do you really want to buy this item?&#39;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Main itemshop-window</span>
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">ItemshopWindow</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">BoardWithTitleBar</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="n">BOARD_WIDTH</span> <span class="o">=</span> <span class="mi">800</span>
</span></span><span class="line"><span class="cl">		<span class="n">BOARD_HEIGHT</span> <span class="o">=</span> <span class="mi">553</span>
</span></span><span class="line"><span class="cl">		<span class="n">DEFAULT_LISTBOX_ITEM_COUNT_X</span> <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl">		<span class="n">DEFAULT_LISTBOX_ITEM_COUNT_Y</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">		<span class="n">DEFAULT_LISTBOX_ITEM_HEIGHT</span> <span class="o">=</span> <span class="mi">136</span>
</span></span><span class="line"><span class="cl">		<span class="n">DEFAULT_LISTBOX_ITEM_WIDTH</span> <span class="o">=</span> <span class="mi">185</span>
</span></span><span class="line"><span class="cl">		<span class="n">CATEGORY_LISTBOX_ITEM_COUNT_X</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">		<span class="n">CATEGORY_LISTBOX_ITEM_COUNT_Y</span> <span class="o">=</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl">		<span class="n">CATEGORY_LISTBOX_ITEM_HEIGHT</span> <span class="o">=</span> <span class="mi">49</span>
</span></span><span class="line"><span class="cl">		<span class="n">CATEGORY_LISTBOX_ITEM_WIDTH</span> <span class="o">=</span> <span class="mi">162</span>
</span></span><span class="line"><span class="cl">		<span class="n">MAIN_LISTBOX_ITEM_COUNT_X</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">		<span class="n">MAIN_LISTBOX_ITEM_COUNT_Y</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">		<span class="n">MAIN_LISTBOX_ITEM_HEIGHT</span> <span class="o">=</span> <span class="mi">136</span>
</span></span><span class="line"><span class="cl">		<span class="n">MAIN_LISTBOX_ITEM_WIDTH</span> <span class="o">=</span> <span class="mi">185</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">BoardWithTitleBar</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;movable&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BOARD_WIDTH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BOARD_HEIGHT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetCloseEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span> <span class="o">=</span> <span class="n">uiToolTip</span><span class="o">.</span><span class="n">ItemToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Create page base</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreatePages</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateDefaultPageTabs</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Create elements for main page</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateBanner</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateRandomItemListbox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Create elements for buy page</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateShopPageTabs</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateItemListbox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateCategorysListbox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Promotion board</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreatePromotionCode</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Payment board</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreatePaymentBoard</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Advertise board</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateAdvertiseBoard</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="c1"># NOTE: Top-most</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateUserDisplay</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateCoinDisplay</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SelectPage</span><span class="p">(</span><span class="n">PAGE_DEFAULT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetCenterPosition</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">BoardWithTitleBar</span><span class="o">.</span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">Destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ResetWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">tabBackgrounds</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">categorys</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bannerNextImageTime</span> <span class="o">=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bannerDecreaseAlpha</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bannerValue</span> <span class="o">=</span> <span class="n">MAX_ALPHA</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bannerIndex</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionNextImageTime</span> <span class="o">=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionValue</span> <span class="o">=</span> <span class="n">MAX_ALPHA</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">Open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetTop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">Close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">OnCloseQuestionDialog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetEditLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="c1"># NOTE: Set random items to landing page</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetRandomStartpageItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">randomListbox</span><span class="o">.</span><span class="n">RemoveAllItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="ow">not</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">alreadyIn</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">			<span class="n">totalItemCount</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="s1">&#39;items&#39;</span> <span class="ow">in</span> <span class="n">category</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="k">for</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">						<span class="n">totalItemCount</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">alreadyIn</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_LISTBOX_ITEM_COUNT_X</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">totalItemCount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="k">break</span>
</span></span><span class="line"><span class="cl">				<span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">				<span class="n">randomCategory</span> <span class="o">=</span> <span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;items&#39;</span> <span class="ow">in</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">[</span><span class="n">randomCategory</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">					<span class="k">return</span>
</span></span><span class="line"><span class="cl">				<span class="n">randomItem</span> <span class="o">=</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">[</span><span class="n">randomCategory</span><span class="p">][</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">[</span><span class="n">randomCategory</span><span class="p">][</span><span class="s1">&#39;items&#39;</span><span class="p">]))]</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">randomItem</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">alreadyIn</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="k">continue</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="n">itemContainer</span> <span class="o">=</span> <span class="n">ItemSlot</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">					<span class="n">randomItem</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span>
</span></span><span class="line"><span class="cl">				<span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">randomListbox</span><span class="o">.</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">itemContainer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">alreadyIn</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">randomItem</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreatePages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">PAGE_MAX_NUM</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">page</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">page</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">page</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">page</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">page</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BOARD_WIDTH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BOARD_HEIGHT</span> <span class="o">-</span> <span class="mi">30</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateDefaultPageTabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_DEFAULT</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">tabBackgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tabBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">PAGE_MAX_NUM</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">RadioButton</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">tabBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">10</span> <span class="o">+</span> <span class="p">(</span><span class="mi">37</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetUpVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_button_up.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetDownVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_button_down.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetOverVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_button_over.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">i</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SelectPage</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_image_</span><span class="si">%d</span><span class="s1">.sub&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">tabImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tabImage</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateUserDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">userBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">userBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/user_display_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">563</span><span class="o">-</span><span class="mi">187</span><span class="p">,</span> <span class="mi">43</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">userBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">userText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">userBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">((</span><span class="n">userBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">15</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">userBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">SetHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">SetVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">SetFontName</span><span class="p">(</span><span class="n">localeInfo</span><span class="o">.</span><span class="n">UI_DEF_FONT_LARGE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">userText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">userText</span> <span class="o">=</span> <span class="n">userText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateCoinDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/coin_display_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">563</span><span class="p">,</span> <span class="mi">43</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coinBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">coinBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">coinBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">coinBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">SetHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">SetVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">SetFontName</span><span class="p">(</span><span class="n">localeInfo</span><span class="o">.</span><span class="n">UI_DEF_FONT_LARGE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">coinText</span> <span class="o">=</span> <span class="n">coinText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateBanner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_DEFAULT</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/banner_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">65</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bannerBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">bannerImage</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerImage</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">bannerBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerImage</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">BANNER_CONTAINER</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">bannerImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetImage</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="n">bannerImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bannerImage</span> <span class="o">=</span> <span class="n">bannerImage</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateRandomItemListbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">randomListbox</span> <span class="o">=</span> <span class="n">ListBox</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_DEFAULT</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemWidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_LISTBOX_ITEM_WIDTH</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemHeight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_LISTBOX_ITEM_HEIGHT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_LISTBOX_ITEM_COUNT_X</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_LISTBOX_ITEM_COUNT_Y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_x</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">228</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">randomListbox</span> <span class="o">=</span> <span class="n">randomListbox</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateShopPageTabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_SHOP</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">tabBackgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tabBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">tab</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Button</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">tabBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">SetUpVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_button_up.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">SetDownVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_button_down.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">SetOverVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_button_over.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">SetEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SelectPage</span><span class="p">(</span><span class="n">PAGE_DEFAULT</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">tab</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/tab_image_back.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">tabImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tabImage</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateItemListbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">listboxBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">listboxBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_SHOP</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">listboxBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/item_listbox_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">listboxBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">190</span><span class="p">,</span> <span class="mi">65</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">listboxBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listboxBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">scrollBar</span> <span class="o">=</span> <span class="n">ScrollBar</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span> <span class="o">=</span> <span class="n">listboxBackground</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">width</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">height</span> <span class="o">=</span> <span class="n">listboxBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">listboxBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span> <span class="o">=</span> <span class="n">scrollBar</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">listbox</span> <span class="o">=</span> <span class="n">ListBox</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_SHOP</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemWidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAIN_LISTBOX_ITEM_WIDTH</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemHeight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAIN_LISTBOX_ITEM_HEIGHT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAIN_LISTBOX_ITEM_COUNT_X</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAIN_LISTBOX_ITEM_COUNT_Y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_x</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_y</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">194</span><span class="p">,</span> <span class="mi">69</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="n">scrollBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">listbox</span> <span class="o">=</span> <span class="n">listbox</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/editline_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabBackgrounds</span><span class="p">[</span><span class="n">PAGE_SHOP</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">editlineBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span> <span class="o">=</span> <span class="n">EditLine</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnType</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">editlineBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetEscapeEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">()])</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">editlineBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">38</span><span class="p">,</span> <span class="n">editlineBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetMax</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetFontName</span><span class="p">(</span><span class="n">localeInfo</span><span class="o">.</span><span class="n">UI_DEF_FONT_LARGE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span> <span class="o">=</span> <span class="n">editLine</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateCategorysListbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">categoryListboxBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">categoryListboxBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_SHOP</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">categoryListboxBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/category_listbox_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">categoryListboxBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">65</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">categoryListboxBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">categoryListboxBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">categoryScrollBar</span> <span class="o">=</span> <span class="n">ScrollBar</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span> <span class="o">=</span> <span class="n">categoryListboxBackground</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">width</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">height</span> <span class="o">=</span> <span class="n">categoryListboxBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">categoryListboxBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">categoryScrollBar</span> <span class="o">=</span> <span class="n">categoryScrollBar</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">categoryListbox</span> <span class="o">=</span> <span class="n">ListBox</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_SHOP</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemWidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CATEGORY_LISTBOX_ITEM_WIDTH</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemHeight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CATEGORY_LISTBOX_ITEM_HEIGHT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CATEGORY_LISTBOX_ITEM_COUNT_Y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CATEGORY_LISTBOX_ITEM_COUNT_X</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">65</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">				<span class="n">scrollBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">categoryScrollBar</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span> <span class="o">=</span> <span class="n">categoryListbox</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreatePromotionCode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_DEFAULT</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/promotion_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">379</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">promotionCodeBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/promotion_editline.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">promotionCodeBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">promotionCodeEditlineBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span> <span class="o">=</span> <span class="n">EditLine</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">event</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">promotionCodeEditlineBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetEscapeEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">()])</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">7</span><span class="p">,</span> <span class="n">promotionCodeEditlineBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetMax</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetFontName</span><span class="p">(</span><span class="n">localeInfo</span><span class="o">.</span><span class="n">UI_DEF_FONT_LARGE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionCodeEditLine</span> <span class="o">=</span> <span class="n">promotionCodeEditLine</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Button</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">promotionCodeBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetUpVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/promotion_redeem_button_up.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetDownVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/promotion_redeem_button_down.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetOverVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/promotion_redeem_button_over.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SendPromotionCode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">145</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionCodeButton</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionCodeButton</span> <span class="o">=</span> <span class="n">promotionCodeButton</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemImage</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemImage</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">promotionCodeBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemImage</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemImage</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemImage</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span> <span class="o">=</span> <span class="n">promotionItemImage</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemCount</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemCount</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemCount</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemCount</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignRight</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemCount</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemCount</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemCount</span> <span class="o">=</span> <span class="n">promotionItemCount</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemAnimation</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">AniImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">promotionCodeBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">OnEndFrame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnEndFrame</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">SetDelay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">240</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">AppendImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/animation/promotion/</span><span class="si">%05d</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemAnimation</span> <span class="o">=</span> <span class="n">promotionItemAnimation</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">promotionAnswerText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">promotionCodeBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">109</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionAnswerText</span> <span class="o">=</span> <span class="n">promotionAnswerText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreatePaymentBoard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">paymentBoard</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">paymentBoard</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_DEFAULT</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">paymentBoard</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/payment_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">paymentBoard</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">445</span><span class="p">,</span> <span class="mi">379</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">paymentBoard</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">paymentBoard</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateAdvertiseBoard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">advertiseBoard</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">advertiseBoard</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">PAGE_DEFAULT</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">advertiseBoard</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/hyperlink_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">advertiseBoard</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">379</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">advertiseBoard</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">advertiseBoard</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">BANNER_CONTAINER</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bannerIndex</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">bannerIndex</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">BANNER_CONTAINER</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">bannerIndex</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="n">item</span><span class="o">.</span><span class="n">OnUpdate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">BANNER_CONTAINER</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bannerNextImageTime</span> <span class="o">&gt;</span> <span class="n">app</span><span class="o">.</span><span class="n">GetTime</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bannerDecreaseAlpha</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">bannerValue</span> <span class="o">-=</span> <span class="n">BANNER_CHANGE_BY</span>
</span></span><span class="line"><span class="cl">					<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bannerValue</span> <span class="o">&lt;</span> <span class="n">MIN_ALPHA</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">						<span class="bp">self</span><span class="o">.</span><span class="n">bannerDecreaseAlpha</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">						<span class="bp">self</span><span class="o">.</span><span class="n">bannerIndex</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">						<span class="bp">self</span><span class="o">.</span><span class="n">bannerImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetImage</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">				<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">bannerValue</span> <span class="o">+=</span> <span class="n">BANNER_CHANGE_BY</span>
</span></span><span class="line"><span class="cl">					<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bannerValue</span> <span class="o">&gt;</span> <span class="n">MAX_ALPHA</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">						<span class="bp">self</span><span class="o">.</span><span class="n">bannerDecreaseAlpha</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">bannerNextImageTime</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">GetTime</span><span class="p">()</span> <span class="o">+</span> <span class="n">IMAGE_CHANGE_TIME</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">bannerImage</span><span class="o">.</span><span class="n">SetAlpha</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bannerValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="o">.</span><span class="n">IsShow</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotionNextImageTime</span> <span class="o">&gt;</span> <span class="n">app</span><span class="o">.</span><span class="n">GetTime</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotionValue</span> <span class="o">&lt;</span> <span class="n">MAX_ALPHA</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">promotionValue</span> <span class="o">+=</span> <span class="n">PROMOTION_CHANGE_BY</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">promotionNextImageTime</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">GetTime</span><span class="p">()</span> <span class="o">+</span> <span class="n">IMAGE_CHANGE_TIME</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="o">.</span><span class="n">SetAlpha</span><span class="p">(</span><span class="n">MINMAX</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotionValue</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">StartPromotionAnimation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">answer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">ITEMSHOP_INFO</span><span class="p">[</span><span class="s1">&#39;promotion_code&#39;</span><span class="p">][</span><span class="n">answer</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">SetPackedFontColor</span><span class="p">(</span><span class="n">ITEMSHOP_INFO</span><span class="p">[</span><span class="s1">&#39;promotion_code&#39;</span><span class="p">][</span><span class="n">answer</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionAnswerText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">answer</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">ResetFrame</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">OnEndFrame</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnEndFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="ow">not</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">PROMOTION_CODE_REWARDS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">reward</span> <span class="o">=</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">PROMOTION_CODE_REWARDS</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="n">item</span><span class="o">.</span><span class="n">SelectItem</span><span class="p">(</span><span class="n">reward</span><span class="p">[</span><span class="s1">&#39;vnum&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">GetIconImageFileName</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionValue</span> <span class="o">=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="o">.</span><span class="n">SetAlpha</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">promotionValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemCount</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reward</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">])</span> <span class="k">if</span> <span class="n">reward</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionItemAnimation</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">constInfo</span><span class="o">.</span><span class="n">PROMOTION_CODE_REWARDS</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">reward</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SendPromotionCode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">GetText</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">net</span><span class="o">.</span><span class="n">SendRedeemPromotionCodePacket</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">LoadCategorys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">RemoveAllItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">content</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">contentButton</span> <span class="o">=</span> <span class="n">CategoryButton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">contentButton</span><span class="o">.</span><span class="n">SetOnMouseLeftButtonUpEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">i</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">SelectCategory</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">contentButton</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItemCountX</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItemCountY</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItemCount</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">categoryScrollBar</span><span class="o">.</span><span class="n">SetMiddleBarSize</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItemCountX</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItemCountY</span><span class="p">())</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItemCount</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">categoryScrollBar</span><span class="o">.</span><span class="n">SetPos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">categoryScrollBar</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">categoryScrollBar</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SelectCategory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="o">.</span><span class="n">HideToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">RemoveAllItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="ow">not</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span><span class="p">]</span><span class="o">.</span><span class="n">SetUp</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span> <span class="o">=</span> <span class="n">category</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">categoryListbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span><span class="p">]</span><span class="o">.</span><span class="n">SetDown</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">searchText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">GetText</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">itemObjects</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">category</span> <span class="ow">or</span> <span class="n">searchText</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="n">itemObjects</span> <span class="o">=</span> <span class="n">itemObjects</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">					<span class="k">for</span> <span class="n">itemObject</span> <span class="ow">in</span> <span class="n">itemObjects</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">						<span class="n">vnum</span> <span class="o">=</span> <span class="n">itemObject</span><span class="p">[</span><span class="s1">&#39;vnum&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">						<span class="n">item</span><span class="o">.</span><span class="n">SelectItem</span><span class="p">(</span><span class="n">vnum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">						<span class="n">name</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetItemName</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">						<span class="k">if</span> <span class="ow">not</span> <span class="n">searchText</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">							<span class="k">continue</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">						<span class="n">itemContainer</span> <span class="o">=</span> <span class="n">ItemSlot</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">							<span class="n">itemObject</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">							<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">							<span class="bp">self</span>
</span></span><span class="line"><span class="cl">						<span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">						<span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">itemContainer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItemCountX</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItemCountY</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItemCount</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">SetMiddleBarSize</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItemCountX</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItemCountY</span><span class="p">())</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItemCount</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">SetPos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SelectPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetEditLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">page</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">tab</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">tab</span><span class="o">.</span><span class="n">SetUp</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">Down</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetTitleName</span><span class="p">(</span><span class="n">ITEMSHOP_INFO</span><span class="p">[</span><span class="s1">&#39;pages&#39;</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ResetEditLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">KillFocus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">promotionCodeEditLine</span><span class="o">.</span><span class="n">KillFocus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="n">item</span><span class="o">.</span><span class="n">ResetEditLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">randomListbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="n">item</span><span class="o">.</span><span class="n">ResetEditLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__OnType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SelectCategory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ReloadItemshop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">LoadCategorys</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SelectCategory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetRandomStartpageItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ReloadItemshopItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">olditem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">					<span class="k">if</span> <span class="n">olditem</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">						<span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
</span></span><span class="line"><span class="cl">						<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ReloadItemshopContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">randomListbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">GetHash</span><span class="p">()</span> <span class="o">==</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">					<span class="n">slot</span><span class="o">.</span><span class="n">LoadItemData</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="k">break</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">GetHash</span><span class="p">()</span> <span class="o">==</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">					<span class="n">slot</span><span class="o">.</span><span class="n">LoadItemData</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">RemoveItemshopItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">category</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">olditem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">					<span class="k">if</span> <span class="n">olditem</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">						<span class="k">del</span> <span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">						<span class="k">if</span> <span class="ow">not</span> <span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">							<span class="k">del</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">							<span class="bp">self</span><span class="o">.</span><span class="n">ReloadItemshop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">						<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">RemoveItemFromItemshopContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">randomListbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">GetHash</span><span class="p">()</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">SetRandomStartpageItems</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">					<span class="k">break</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">GetItems</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">slot</span><span class="o">.</span><span class="n">GetHash</span><span class="p">()</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="n">slot</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">listbox</span><span class="o">.</span><span class="n">RemoveItem</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">AddItemshopItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">					<span class="n">category</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">					<span class="bp">self</span><span class="o">.</span><span class="n">SelectCategory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_category</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">constInfo</span><span class="o">.</span><span class="n">ITEMSHOP_INFOS</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ReloadItemshop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetCoins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coins</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">coinText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="s1">&#39;&lt; </span><span class="si">%s</span><span class="s1"> &gt;&#39;</span> <span class="o">%</span> <span class="n">localeInfo</span><span class="o">.</span><span class="n">NumberToDecimalString</span><span class="p">(</span><span class="n">coins</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">userText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="s1">&#39;&lt; </span><span class="si">%s</span><span class="s1"> &gt;&#39;</span> <span class="o">%</span> <span class="n">player</span><span class="o">.</span><span class="n">GetMainCharacterName</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">RequestBuyItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span> <span class="o">=</span> <span class="n">uiCommon</span><span class="o">.</span><span class="n">QuestionDialog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">ITEMSHOP_INFO</span><span class="p">[</span><span class="s1">&#39;strings&#39;</span><span class="p">][</span><span class="s1">&#39;BUY_QUESTION&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span><span class="o">.</span><span class="n">SetAcceptEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="nb">hash</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__RequestBuyItemQuestionDialog_OnAccept</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span><span class="o">.</span><span class="n">SetCancelEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__RequestBuyItemQuestionDialog_OnCancel</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span><span class="o">.</span><span class="n">Open</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">constInfo</span><span class="o">.</span><span class="n">SET_ITEM_QUESTION_DIALOG_STATUS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__RequestBuyItemQuestionDialog_OnAccept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">net</span><span class="o">.</span><span class="n">SendBuyItemshopItemPacket</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">OnCloseQuestionDialog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__RequestBuyItemQuestionDialog_OnCancel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">OnCloseQuestionDialog</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnCloseQuestionDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">questionDialog</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="n">constInfo</span><span class="o">.</span><span class="n">SET_ITEM_QUESTION_DIALOG_STATUS</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnPressEscapeKey</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnPressExitKey</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: CategoryButton class</span>
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">CategoryButton</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="n">content</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="n">index</span>
</span></span><span class="line"><span class="cl">			<span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/category_slot_</span><span class="si">%d</span><span class="s1">.sub&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">index</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">text</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">GetTextSize</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">text</span><span class="o">.</span><span class="n">GetTextSize</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">			<span class="n">text</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">slot</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">slot</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">slot</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">slot</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/category_overlay.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">slot</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="n">slot</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">image</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">image</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">image</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon_image</span> <span class="o">=</span> <span class="n">ICON_PATH</span> <span class="o">+</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;icon&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">content</span><span class="p">[</span><span class="s1">&#39;icon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">item</span><span class="o">.</span><span class="n">SelectItem</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="s1">&#39;icon&#39;</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">				<span class="n">icon_image</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetIconImageFileName</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">image</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="n">icon_image</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">image</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">29</span> <span class="o">-</span> <span class="n">image</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">24</span> <span class="o">-</span> <span class="n">image</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">image</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="o">.</span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">ItemSlot</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_info</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">toolTip</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/itemslot.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemVnum</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;vnum&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">metinSlot</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;sockets&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">attrSlot</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">discount</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;discount&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">limitCount</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;limitCount&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;endTime&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span> <span class="o">=</span> <span class="n">toolTip</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">proxy</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="ow">not</span> <span class="n">ENABLE_OTHER_TOOLTIP_FUNCTION</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">SAFE_SetStringEvent</span><span class="p">(</span><span class="s1">&#39;MOUSE_OVER_IN&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ShowToolTip</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">SAFE_SetStringEvent</span><span class="p">(</span><span class="s1">&#39;MOUSE_OVER_OUT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">HideToolTip</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">item</span><span class="o">.</span><span class="n">SelectItem</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemVnum</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateSpecialOfferElements</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateDiscountElements</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateLimitedCountElements</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateEditline</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateButtons</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateImage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateItemName</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateFancyCorner</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">limitCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">UpdatePriceValue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="o">.</span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="o">.</span><span class="n">HideToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferBackground</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">buttonText</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">buyButton</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">discountImage</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">ENABLE_OTHER_TOOLTIP_FUNCTION</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">OnMouseOverIn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">ShowToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">OnMouseOverOut</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">HideToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="c1"># NOTE: We just use this to reload items</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">LoadItemData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_info</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemVnum</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;vnum&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">metinSlot</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;sockets&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">attrSlot</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;hash&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">discount</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;discount&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">limitCount</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;limitCount&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="n">item_info</span><span class="p">[</span><span class="s1">&#39;endTime&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">item</span><span class="o">.</span><span class="n">SelectItem</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemVnum</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountImage</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">limitCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountImage</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountImage</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">icon</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">GetIconImageFileName</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemNameText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">GetItemName</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">UpdatePriceValue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ShowToolTip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="c1"># TODO: Create SetItemshop item with extra info</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="o">.</span><span class="n">ClearToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="o">.</span><span class="n">AddItemData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemVnum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">metinSlot</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrSlot</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">HideToolTip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">toolTip</span><span class="o">.</span><span class="n">HideToolTip</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetHash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateEditline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/small_editline_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="mi">62</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editlineBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editlineBackground</span> <span class="o">=</span> <span class="n">editlineBackground</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span> <span class="o">=</span> <span class="n">EditLine</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">UpdatePriceValue</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editlineBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetEscapeEvent</span><span class="p">(</span><span class="k">lambda</span> <span class="p">:</span> <span class="n">editLine</span><span class="o">.</span><span class="n">KillFocus</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editlineBackground</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">editlineBackground</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetMax</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">STACK_MAX</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetNumberMode</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">editLine</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span> <span class="o">=</span> <span class="n">editLine</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/buy_button.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">SetOnMouseLeftButtonUpEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RequestBuyItem</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buyButton</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">buyButton</span> <span class="o">=</span> <span class="n">buyButton</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buyButton</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetFontName</span><span class="p">(</span><span class="n">localeInfo</span><span class="o">.</span><span class="n">UI_DEF_FONT_LARGE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetPackedFontColor</span><span class="p">(</span><span class="mh">0xffdad3c9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">buttonText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">buttonText</span> <span class="o">=</span> <span class="n">buttonText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">coinIcon</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinIcon</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinIcon</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinIcon</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/coin_icon.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">coinIcon</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">coinIcon</span> <span class="o">=</span> <span class="n">coinIcon</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Button</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="mi">62</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetUpVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/increase_button_up.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetDownVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/increase_button_down.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetOverVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/increase_button_over.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">increaseButton</span><span class="o">.</span><span class="n">SetEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">IncreaseValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">increaseButton</span> <span class="o">=</span> <span class="n">increaseButton</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Button</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">62</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetUpVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/decrease_button_up.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetDownVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/decrease_button_down.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetOverVisual</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/decrease_button_over.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">decreaseButton</span><span class="o">.</span><span class="n">SetEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DecreaseValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">decreaseButton</span> <span class="o">=</span> <span class="n">decreaseButton</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ResetEditLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">KillFocus</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">RequestBuyItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">RequestBuyItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buyCount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">IncreaseValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">GetTextAsValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">UpdatePriceValue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">DecreaseValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">GetTextAsValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">UpdatePriceValue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">UpdatePriceValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">number</span> <span class="o">=</span> <span class="n">MINMAX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">GetTextAsValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">STACK_MAX</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">editLine</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">item</span><span class="o">.</span><span class="n">SelectItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemVnum</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">IsAntiFlag</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">ITEM_ANTIFLAG_STACK</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">IsFlag</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">ITEM_FLAG_STACKABLE</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">limitCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">increaseButton</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">decreaseButton</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">editlineBackground</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">elif</span> <span class="n">number</span> <span class="o">&gt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">STACK_MAX</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">increaseButton</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">decreaseButton</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">elif</span> <span class="n">number</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">decreaseButton</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">increaseButton</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">increaseButton</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">decreaseButton</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">editlineBackground</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">buyCount</span> <span class="o">=</span> <span class="n">number</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">buttonText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">						<span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">							<span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">discount</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">buyCount</span>
</span></span><span class="line"><span class="cl">				<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">					<span class="n">ITEMSHOP_INFO</span><span class="p">[</span><span class="s1">&#39;strings&#39;</span><span class="p">][</span><span class="s1">&#39;ITEM_PRICE&#39;</span><span class="p">]</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">buyCount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">GetTextSize</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">GetTextSize</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">				<span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">				<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="o">.</span><span class="n">GetText</span><span class="p">())):</span>
</span></span><span class="line"><span class="cl">					<span class="n">line</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceOverlay</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">coinIcon</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonText</span><span class="o">.</span><span class="n">GetTextSize</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">14</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">ITEMSHOP_INFO</span><span class="p">[</span><span class="s1">&#39;strings&#39;</span><span class="p">][</span><span class="s1">&#39;ITEMS_LEFT&#39;</span><span class="p">]</span> <span class="o">%</span> <span class="n">localeInfo</span><span class="o">.</span><span class="n">NumberToDecimalString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limitCount</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ExpandedImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">GetIconImageFileName</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span><span class="o">.</span><span class="n">SetWindowVerticalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">icon</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">icon</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateItemName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">GetItemName</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">item</span><span class="o">.</span><span class="n">GetItemName</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; (x</span><span class="si">%d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">SetHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">itemNameText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemNameText</span> <span class="o">=</span> <span class="n">itemNameText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateSpecialOfferElements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">AniImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">SetDelay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">120</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">specialOfferBackground</span><span class="o">.</span><span class="n">AppendImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/animation/hotoffer/</span><span class="si">%05d</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferBackground</span> <span class="o">=</span> <span class="n">specialOfferBackground</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">219.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">192.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">77</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferCoutdown</span> <span class="o">=</span> <span class="n">specialOfferCoutdown</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateFancyCorner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/itemslot_right_bottom.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">fancyCorner</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">(),</span> <span class="n">fancyCorner</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignRight</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">fancyCorner</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">fancyCorner</span> <span class="o">=</span> <span class="n">fancyCorner</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateDiscountElements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountImage</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountImage</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountImage</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/badge_sale.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountImage</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">discountImage</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountImage</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignRight</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">discountImage</span> <span class="o">=</span> <span class="n">discountImage</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetPackedFontColor</span><span class="p">(</span><span class="mh">0xff69210e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceText</span><span class="o">.</span><span class="n">SetWindowHorizontalAlignCenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span> <span class="o">=</span> <span class="n">discountPriceText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceOverlay</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceOverlay</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discountPriceText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceOverlay</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceOverlay</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceOverlay</span><span class="o">.</span><span class="n">SetPackedFontColor</span><span class="p">(</span><span class="mh">0xff69210e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">discountPriceOverlay</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">discountPriceOverlay</span> <span class="o">=</span> <span class="n">discountPriceOverlay</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateLimitedCountElements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountImage</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountImage</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountImage</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountImage</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountImage</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/badge_limitedcount.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountImage</span> <span class="o">=</span> <span class="n">limitedCountImage</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountBackground</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/limitedcount_background.sub&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">SetWindowVerticalAlignBottom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountBackground</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountBackground</span> <span class="o">=</span> <span class="n">limitedCountBackground</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountText</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limitedCountBackground</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountText</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountText</span><span class="o">.</span><span class="n">SetFontColor</span><span class="p">((</span><span class="mf">194.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">186.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">174.0</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountText</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">limitedCountText</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">limitedCountText</span> <span class="o">=</span> <span class="n">limitedCountText</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">app</span><span class="o">.</span><span class="n">GetUNIX</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">hours</span> <span class="o">=</span> <span class="n">diff</span> <span class="o">/</span> <span class="mi">3600</span>
</span></span><span class="line"><span class="cl">				<span class="n">minutes</span> <span class="o">=</span> <span class="n">diff</span> <span class="o">/</span> <span class="mi">60</span> <span class="o">%</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl">				<span class="n">seconds</span> <span class="o">=</span> <span class="n">diff</span> <span class="o">%</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">specialOfferCoutdown</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">:</span><span class="si">%02d</span><span class="s1">:</span><span class="si">%02d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">MiddleBar</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">DragButton</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">width</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">height</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">move_event</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">wheel_event</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">DragButton</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;movable&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">MakeImage</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetMoveEvent</span><span class="p">(</span><span class="n">move_event</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetOnMouseWheel</span><span class="p">(</span><span class="n">wheel_event</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">MakeImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">top</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">top</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">top</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/scrollbar_middle_</span><span class="si">%s</span><span class="s1">.tga&#39;</span> <span class="o">%</span> <span class="n">color</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">top</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">top</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">top</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">middle</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ExpandedImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">middle</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">middle</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/scrollbar_middle_</span><span class="si">%s</span><span class="s1">.tga&#39;</span> <span class="o">%</span> <span class="n">color</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">middle</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">middle</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">middle</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">bottom</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ImageBox</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">bottom</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">bottom</span><span class="o">.</span><span class="n">LoadImage</span><span class="p">(</span><span class="s1">&#39;d:/ymir work/ui/itemshop/base/scrollbar_middle_</span><span class="si">%s</span><span class="s1">.tga&#39;</span> <span class="o">%</span> <span class="n">color</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">bottom</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">bottom</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">top</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">bottom</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middle</span> <span class="o">=</span> <span class="n">middle</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">width</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">height</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">DragButton</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">height</span> <span class="o">-=</span> <span class="mi">4</span><span class="o">*</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middle</span><span class="o">.</span><span class="n">SetRenderingRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">height</span><span class="p">)</span><span class="o">/</span><span class="mf">4.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetOnMouseWheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onMouseWheel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">OnMouseWheel</span> <span class="o">=</span> <span class="n">onMouseWheel</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">ScrollBar</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="n">SCROLLBAR_MIDDLE_WIDTH</span> <span class="o">=</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl">		<span class="n">SCROLLBAR_MIDDLE_HEIGHT</span> <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">width</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">height</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">CreateScrollBar</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetScrollBarHeight</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ResetWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">curPos</span> <span class="o">=</span> <span class="mf">0.0</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">eventScroll</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">arg</span><span class="p">:</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">scrollStep</span> <span class="o">=</span> <span class="mf">0.21</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">CreateScrollBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">barSlot</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Bar3D</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">barSlot</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">barSlot</span><span class="o">.</span><span class="n">AddFlag</span><span class="p">(</span><span class="s1">&#39;not_pick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">barSlot</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">barSlot</span> <span class="o">=</span> <span class="n">barSlot</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="kn">import</span> <span class="nn">weakref</span>
</span></span><span class="line"><span class="cl">			<span class="n">scrollBarWeakRef</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			<span class="k">def</span> <span class="nf">OnMouseWheel</span><span class="p">(</span><span class="n">nLen</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">scrollBar</span> <span class="o">=</span> <span class="n">scrollBarWeakRef</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="n">scrollBar</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">					<span class="k">if</span> <span class="n">nLen</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">						<span class="n">scrollBar</span><span class="o">.</span><span class="n">OnUp</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">					<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">						<span class="n">scrollBar</span><span class="o">.</span><span class="n">OnDown</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">middleBar</span> <span class="o">=</span> <span class="n">MiddleBar</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">					<span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_WIDTH</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">					<span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_HEIGHT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">					<span class="n">move_event</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">__mem_func__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OnMove</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">					<span class="n">wheel_event</span> <span class="o">=</span> <span class="n">OnMouseWheel</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">					<span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">middleBar</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middleBar</span> <span class="o">=</span> <span class="n">middleBar</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">Destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middleBar</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">eventScroll</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">arg</span><span class="p">:</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetScrollEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">eventScroll</span> <span class="o">=</span> <span class="n">event</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetMiddleBarSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageScale</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_HEIGHT</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pageScale</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middleBar</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_WIDTH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_HEIGHT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_HEIGHT</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetScrollBarHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_HEIGHT</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middleBar</span><span class="o">.</span><span class="n">SetRestrictMovementArea</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">UpdateBarSlot</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">UpdateBarSlot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">barSlot</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">barSlot</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetWidth</span><span class="p">()</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetHeight</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetPos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">curPos</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetPos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">pos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">newPos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span><span class="p">)</span> <span class="o">*</span> <span class="n">pos</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">middleBar</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">newPos</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">OnMove</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetScrollStep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">scrollStep</span> <span class="o">=</span> <span class="n">step</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetScrollStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollStep</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnMouseWheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nLen</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">nLen</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">OnUp</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">OnDown</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetPos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curPos</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scrollStep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetPos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">scrollStep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnMove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="mi">0</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="n">xLocal</span><span class="p">,</span> <span class="n">yLocal</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">middleBar</span><span class="o">.</span><span class="n">GetLocalPosition</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">curPos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yLocal</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">eventScroll</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnMouseLeftButtonDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="n">xMouseLocalPosition</span><span class="p">,</span> <span class="n">yMouseLocalPosition</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetMouseLocalPosition</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">pickedPos</span> <span class="o">=</span> <span class="n">yMouseLocalPosition</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCROLLBAR_MIDDLE_HEIGHT</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl">			<span class="n">newPos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">pickedPos</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pageSize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetPos</span><span class="p">(</span><span class="n">newPos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">ListBox</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">parent</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemWidth</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">itemHeight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_count_y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">item_gap_y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">pos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="n">scrollBar</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">			<span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemWidth</span> <span class="o">=</span> <span class="n">itemWidth</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemHeight</span> <span class="o">=</span> <span class="n">itemHeight</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span> <span class="o">=</span> <span class="n">item_count_x</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">item_count_y</span> <span class="o">=</span> <span class="n">item_count_y</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">item_gap_x</span> <span class="o">=</span> <span class="n">item_gap_x</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">item_gap_y</span> <span class="o">=</span> <span class="n">item_gap_y</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">scrollBar</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">SetScrollBar</span><span class="p">(</span><span class="n">scrollBar</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">__UpdateSize</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">ResetWindow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">ResetWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">basePos</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemList</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__UpdateSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetSize</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">itemWidth</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_gap_x</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_gap_x</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemHeight</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_gap_y</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_gap_y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetBasePos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basePos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">basePos</span><span class="o">=</span><span class="n">basePos</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">newItem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="n">newItem</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsInViewRange</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">					<span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetItemViewCoord</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="n">newItem</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="n">newItem</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">RemoveItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetBasePos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basePos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">RemoveAllItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">item</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">item</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="k">del</span> <span class="n">item</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="o">=</span><span class="p">[]</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetBasePos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">AppendItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">newItem</span><span class="o">.</span><span class="n">SetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">newItem</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itemHeight</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">newItem</span><span class="o">.</span><span class="n">OnMouseWheel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMouseWheel</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">pos</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsInViewRange</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">GetItemViewCoord</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">newItem</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">newItem</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">newItem</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newItem</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnMouseWheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nLen</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">OnMouseWheel</span><span class="p">(</span><span class="n">nLen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">SetScrollBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scrollBar</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">scrollBar</span><span class="o">.</span><span class="n">SetScrollEvent</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">__mem_func__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__OnScroll</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">=</span><span class="n">scrollBar</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetItemCountY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_y</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetItemCountX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">itemList</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetItemCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetItemViewCoord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="p">(</span><span class="n">pos</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemWidth</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_gap_x</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">			<span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">				<span class="p">(</span><span class="n">pos</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">basePos</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemHeight</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_gap_y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__OnScroll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">SetBasePos</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scrollBar</span><span class="o">.</span><span class="n">GetPos</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetScrollLen</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__GetScrollLen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">scrollLen</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">GetItemCount</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_y</span><span class="p">))</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">scrollLen</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">scrollLen</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">__IsInViewRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">basePos</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="n">pos</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">basePos</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_count_y</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_count_x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">				<span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">class</span> <span class="nc">EditLine</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">EditLine</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			 <span class="n">event</span>
</span></span><span class="line"><span class="cl">			<span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">EditLine</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">eventOnType</span> <span class="o">=</span> <span class="n">event</span> <span class="k">if</span> <span class="n">event</span> <span class="k">else</span> <span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="n">NoneMethod</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">EditLine</span><span class="o">.</span><span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="bp">self</span><span class="o">.</span><span class="n">eventOnType</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="n">NoneMethod</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">GetTextAsValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="n">default</span> <span class="k">if</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="o">.</span><span class="n">GetText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="o">.</span><span class="n">GetText</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">		<span class="k">def</span> <span class="nf">OnIMEUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">snd</span><span class="o">.</span><span class="n">PlaySound</span><span class="p">(</span><span class="s1">&#39;sound/ui/type.wav&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">imeText</span> <span class="o">=</span> <span class="n">ime</span><span class="o">.</span><span class="n">GetText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bCodePage</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="n">oldText</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="o">.</span><span class="n">GetText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="n">ui</span><span class="o">.</span><span class="n">TextLine</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imeText</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="ow">not</span> <span class="n">imeText</span> <span class="o">==</span> <span class="n">oldText</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="bp">self</span><span class="o">.</span><span class="n">eventOnType</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># NOTE: Global functions</span>
</span></span><span class="line"><span class="cl">	<span class="k">def</span> <span class="nf">MINMAX</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="n">value</span> <span class="o">=</span> <span class="nb">min</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="nb">max</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="n">value</span> <span class="o">=</span> <span class="nb">max</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">value</span>
</span></span></code></pre></div>
            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="sidebar" class="default-animation">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">
<a href="../../../../../index.html"><h4>sura-head</h4></a>
        </div>
        <div class="searchbox default-animation">
          <label for="search-by"><i class="fas fa-search"></i></label>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="../../../../../js/auto-complete8069.js?1670088480" defer></script>
        <script src="../../../../../js/lunr.min8069.js?1670088480" defer></script>
        <script src="../../../../../js/lunr.stemmer.support.min8069.js?1670088480" defer></script>
        <script src="../../../../../js/lunr.multi.min8069.js?1670088480" defer></script>
        <script src="../../../../../js/lunr.en.min8069.js?1670088480" defer></script>
        <script src="../../../../../js/search8069.js?1670088480" defer></script>
      </div>
      <div id="homelinks" class="default-animation">
        <ul>
          <li>
              <a class="padding" href="../../../../../index.html"><i class="fas fa-home"></i> Home</a>
          </li>
        </ul>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics collapsible-menu">
          <li data-nav-id="/serverfiles/" title="Serverfiles" class="dd-item"><a href="../../../../../serverfiles/index.html">Serverfiles</a></li>
          <li data-nav-id="/installation/" title="Installation" class="dd-item"><input type="checkbox" id="section-07cca5796d23f5bae96340e1eaa52bc5" class="toggle"/><label for="section-07cca5796d23f5bae96340e1eaa52bc5" ></label><a href="../../../../../installation/index.html">Installation</a><ul>
          <li data-nav-id="/installation/freebsd/" title="FreeBSD" class="dd-item"><a href="../../../../../installation/freebsd/index.html">FreeBSD</a></li>
          <li data-nav-id="/installation/ssh/" title="SSH" class="dd-item"><a href="../../../../../installation/ssh/index.html">SSH</a></li>
          <li data-nav-id="/installation/mysql/" title="MySQL" class="dd-item"><a href="../../../../../installation/mysql/index.html">MySQL</a></li>
          <li data-nav-id="/installation/netdata/" title="Netdata" class="dd-item"><a href="../../../../../installation/netdata/index.html">Netdata</a></li></ul></li>
          <li data-nav-id="/systems/" title="Systems" class="dd-item parent"><input type="checkbox" id="section-8032065834bbbd2a3e51cab841014698" class="toggle" checked/><label for="section-8032065834bbbd2a3e51cab841014698" ></label><a href="../../../../index.html">Systems</a><ul>
          <li data-nav-id="/systems/itemshop/" title="Itemshop" class="dd-item parent"><input type="checkbox" id="section-bbb7ab6baa853f143816058e1337ac6e" class="toggle" checked/><label for="section-bbb7ab6baa853f143816058e1337ac6e" ></label><a href="../../../index.html">Itemshop</a><ul>
          <li data-nav-id="/systems/itemshop/installation/" title="Installation" class="dd-item parent"><input type="checkbox" id="section-b371428a3419ef49c362d7ae7d67ec4c" class="toggle" checked/><label for="section-b371428a3419ef49c362d7ae7d67ec4c" ></label><a href="../../index.html">Installation</a><ul>
          <li data-nav-id="/systems/itemshop/installation/server/" title="Server" class="dd-item"><input type="checkbox" id="section-970d61e88b8846bf1033cf2b67d8d6b0" class="toggle"/><label for="section-970d61e88b8846bf1033cf2b67d8d6b0" ></label><a href="../../server/index.html">Server</a><ul>
          <li data-nav-id="/systems/itemshop/installation/server/common/" title="Common" class="dd-item"><a href="../../server/common/index.html">Common</a></li>
          <li data-nav-id="/systems/itemshop/installation/server/db/" title="DB" class="dd-item"><a href="../../server/db/index.html">DB</a></li>
          <li data-nav-id="/systems/itemshop/installation/server/game/" title="Game" class="dd-item"><a href="../../server/game/index.html">Game</a></li>
          <li data-nav-id="/systems/itemshop/installation/server/database/" title="Database" class="dd-item"><a href="../../server/database/index.html">Database</a></li></ul></li>
          <li data-nav-id="/systems/itemshop/installation/binary/" title="Binary" class="dd-item parent"><input type="checkbox" id="section-40904d5245286687a253a77be5db0ea7" class="toggle" checked/><label for="section-40904d5245286687a253a77be5db0ea7" ></label><a href="../index.html">Binary</a><ul>
          <li data-nav-id="/systems/itemshop/installation/binary/eterpythonlib/" title="EterPythonLib" class="dd-item"><a href="../eterpythonlib/index.html">EterPythonLib</a></li>
          <li data-nav-id="/systems/itemshop/installation/binary/userinterface/" title="UserInterface" class="dd-item"><a href="../userinterface/index.html">UserInterface</a></li>
          <li data-nav-id="/systems/itemshop/installation/binary/client/" title="Client" class="dd-item active"><a href="index.html">Client</a></li></ul></li></ul></li>
          <li data-nav-id="/systems/itemshop/errors/" title="Possible errors and fixes" class="dd-item"><a href="../../../errors/index.html">Possible errors and fixes</a></li>
          <li data-nav-id="/systems/itemshop/guides/" title="Guides" class="dd-item"><a href="../../../guides/index.html">Guides</a></li>
          <li data-nav-id="/systems/itemshop/howto/" title="HowTo Addons" class="dd-item"><a href="../../../howto/index.html">HowTo Addons</a></li>
          <li data-nav-id="/systems/itemshop/mysql/" title="Mysql-Tables" class="dd-item"><a href="../../../mysql/index.html">Mysql-Tables</a></li></ul></li></ul></li>
          <li data-nav-id="/fixes/" title="Fixes" class="dd-item"><input type="checkbox" id="section-abc5759ee155c22affa71e4aa9f79a1a" class="toggle"/><label for="section-abc5759ee155c22affa71e4aa9f79a1a" ></label><a href="../../../../../fixes/index.html">Fixes</a><ul>
          <li data-nav-id="/fixes/invalid_player_id/" title="DoS vulnerability (invalid player id spam)" class="dd-item"><a href="../../../../../fixes/invalid_player_id/index.html">DoS vulnerability (invalid player id spam)</a></li>
          <li data-nav-id="/fixes/sectree_memory/" title="SecTree Memory adjustment" class="dd-item"><a href="../../../../../fixes/sectree_memory/index.html">SecTree Memory adjustment</a></li>
          <li data-nav-id="/fixes/collsion_rendering/" title="Collision rendering" class="dd-item"><a href="../../../../../fixes/collsion_rendering/index.html">Collision rendering</a></li></ul></li>
        </ul>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"/>
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
          <ul>
            <li id="select-language-container" class="footerLangSwitch">
              <a class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-language" onchange="location = baseUri + this.value;">
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch">
              <a class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                    <option id="blue" value="blue" selected>Blue</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
              <script>window.variants && variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks"><a class="padding" onclick="clearHistory();"><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter"><center>
    <a href="https://discord.gg/sura-head"><i class="fas fa-heart"></i>Join our discord</a>
</center>
        </div>
      </div>
    </aside>
    <script src="../../../../../js/clipboard.min8069.js?1670088480" defer></script>
    <script src="../../../../../js/perfect-scrollbar.min8069.js?1670088480" defer></script>
    <script src="../../../../../js/featherlight.min8069.js?1670088480" defer></script>
    <script src="../../../../../js/theme8069.js?1670088480" defer></script>
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vaafb692b2aea4879b33c060e79fe94621666317369993" integrity="sha512-0ahDYl866UMhKuYcW078ScMalXqtFJggm7TmlUtp0UlD4eQk0Ixfnm5ykXKvGJNFjLMoortdseTfsRT8oCfgGA==" data-cf-beacon='{"rayId":"773e22509a9799d5","version":"2022.11.3","r":1,"token":"a7c91de8d0ad498fbb5c0483e3f90c9c","si":100}' crossorigin="anonymous"></script>
</body>

<!-- Mirrored from docs.sura-head.dev/systems/itemshop/installation/binary/client/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 03 Dec 2022 17:48:55 GMT -->
</html>
